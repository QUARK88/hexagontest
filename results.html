<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>Hex Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = ""
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<img src="hex.png" class="center"></img>
<hr>

<h1>Results</h1>

<h2>Hierarchy : <span class="weight-300" id="b1"></span></h2>
<div class="axis">
    <img id="img-v1" src="value_images/v1.png" height="128pt"/>
    <div class="bar v1" id="bar-v1"><div class="text-wrapper" id="v1"></div></div>
    <div class="bar v2" id="bar-v2"><div class="text-wrapper" id="v2"></div></div>
    <img id="img-v2" src="value_images/v2.png" height="128pt"/>
</div>
<h2>Property : <span class="weight-300" id="b2"></span></h2>
<div class="axis">
    <img id="img-v3" src="value_images/v3.png" height="128pt"/>
    <div class="bar v3" id="bar-v3"><div class="text-wrapper" id="v3"></div></div>
    <div class="bar v4" id="bar-v4"><div class="text-wrapper" id="v4"></div></div>
    <img id="img-v4" src="value_images/v4.png" height="128pt"/>
</div>
<h2>Autonomy : <span class="weight-300" id="b3"></span></h2>
<div class="axis">
    <img id="img-v5" src="value_images/v5.png" height="128pt"/>
    <div class="bar v5" id="bar-v5"><div class="text-wrapper" id="v5"></div></div>
    <div class="bar v6" id="bar-v6"><div class="text-wrapper" id="v6"></div></div>
    <img id="img-v6" src="value_images/v6.png" height="128pt"/>
</div>
<h2>Horizontality : <span class="weight-300" id="b4"></span></h2>
<div class="axis">
    <img id="img-v7" src="value_images/v7.png" height="128pt"/>
    <div class="bar v7" id="bar-v7"><div class="text-wrapper" id="v7"></div></div>
    <div class="bar v8" id="bar-v8"><div class="text-wrapper" id="v8"></div></div>
    <img id="img-v8" src="value_images/v8.png" height="128pt"/>
</div>
<h2>Equality : <span class="weight-300" id="b5"></span></h2>
<div class="axis">
    <img id="img-v9" src="value_images/v9.png" height="128pt"/>
    <div class="bar v9" id="bar-v9"><div class="text-wrapper" id="v9"></div></div>
    <div class="bar v10" id="bar-v10"><div class="text-wrapper" id="v10"></div></div>
    <img id="img-v10" src="value_images/v10.png" height="128pt"/>
</div>
<h2>Command : <span class="weight-300" id="b6"></span></h2>
<div class="axis">
    <img id="img-v11" src="value_images/v11.png" height="128pt"/>
    <div class="bar v11" id="bar-v11"><div class="text-wrapper" id="v11"></div></div>
    <div class="bar v12" id="bar-v12"><div class="text-wrapper" id="v12"></div></div>
    <img id="img-v12" src="value_images/v12.png" height="128pt"/>
</div>
<h2>Closest Match : <span class="weight-300" id="ideology-label"></span></h2>
<p></p>
<p></p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';" style="background-color: #00a0e0;">Back</button> <br>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    v1 = getQueryVariable("v1")
    v3 = getQueryVariable("v3")
    v5 = getQueryVariable("v5")
    v7 = getQueryVariable("v7")
    v9 = getQueryVariable("v9")
    v11 = getQueryVariable("v11")
    v2 = (100 - v1).toFixed(1)
    v4 = (100 - v3).toFixed(1)
    v6 = (100 - v5).toFixed(1)
    v8 = (100 - v7).toFixed(1)
    v10 = (100 - v9).toFixed(1)
    v12 = (100 - v11).toFixed(1)

    setBarValue("v1", v1)
    setBarValue("v2", v2)
    setBarValue("v3", v3)
    setBarValue("v4", v4)
    setBarValue("v5", v5)
    setBarValue("v6", v6)
    setBarValue("v7", v7)
    setBarValue("v8", v8)
    setBarValue("v9", v9)
    setBarValue("v10", v10)
    setBarValue("v11", v11)
    setBarValue("v12", v12)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.abs(ideologies[i].stats.b1 - v1)
        dist += Math.abs(ideologies[i].stats.b2 - v3)
        dist += Math.abs(ideologies[i].stats.b3 - v5)
        dist += Math.abs(ideologies[i].stats.b4 - v7)
        dist += Math.abs(ideologies[i].stats.b5 - v9)
        dist += Math.abs(ideologies[i].stats.b6 - v11)
        if (dist < ideodist) {
            ideology = ideologies[i].name
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 1000;
        c.height = 1000;
        ctx.fillStyle = "#c0c0c0"
        ctx.fillRect(0,0,1000,1000);
	
        ctx.font="700 50px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("Hex", 20, 70)
        ctx.font="30px Montserrat"
        ctx.fillText(ideology, 20, 120)

        ctx.textAlign="left"
        if (v1 >= 25) {ctx.fillText(v1 + "%", 130, 232.5)}
        if (v3 >= 25) {ctx.fillText(v3 + "%", 130, 352.5)}
        if (v5 >= 25) {ctx.fillText(v5 + "%", 130, 472.5)}
        if (v7 >= 25) {ctx.fillText(v7 + "%", 130, 592.5)}
        if (v9 >= 25) {ctx.fillText(v9 + "%", 130, 712.5)}
        if (v11 >= 25) {ctx.fillText(v11 + "%", 130, 832.5)}
        ctx.textAlign="right"
        if (v2 >= 25) {ctx.fillText(v2 + "%", 670, 232.5)}
        if (v4 >= 25) {ctx.fillText(v4 + "%", 670, 352.5)}
        if (v6 >= 25) {ctx.fillText(v6 + "%", 670, 472.5)}
        if (v8 >= 25) {ctx.fillText(v8 + "%", 670, 592.5)}
        if (v10 >= 25) {ctx.fillText(v10 + "%", 670, 712.5)}
        if (v12 >= 25) {ctx.fillText(v12 + "%", 670, 832.5)}

        ctx.font="300 30px Montserrat"
	ctx.fillText("Made by Solar#5896", 780, 80)
	
        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
